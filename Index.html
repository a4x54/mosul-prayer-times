<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مواقيت الصلاة - الموصل</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: #333;
            transition: background 0.6s ease, color 0.6s ease;
        }

        body.day {
            background: linear-gradient(to bottom right, #ffecd2, #fcb69f);
            color: #333;
        }

        body.night {
            background: linear-gradient(to bottom right, #141E30, #243B55);
            color: #fff;
        }

        h1 {
            text-align: center;
            font-size: 2.2em;
            margin-bottom: 5px;
        }

        h2 {
            text-align: center;
            font-weight: normal;
            opacity: 0.8;
            margin-top: 0;
            font-size: 1.2em;
        }

        #date {
            text-align: center;
            margin-top: 10px;
            opacity: 0.9;
            font-size: 1.1em;
        }

        .container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 25px;
            padding: 10px;
        }

        .card {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            transition: all 0.4s ease;
            transform: translateY(20px);
            opacity: 0;
        }

        body.day .card {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
        }

        body.night .card {
            background: linear-gradient(145deg, #2C3E50, #34495E);
        }

        .card.show {
            transform: translateY(0);
            opacity: 1;
        }

        .icon {
            font-size: 28px;
            margin-bottom: 10px;
            color: #ff7e5f;
        }

        body.night .icon {
            color: #ffd86f;
        }

        .prayer-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .prayer-time {
            font-size: 22px;
            font-weight: bold;
            color: #ff4b2b;
        }

        body.night .prayer-time {
            color: #ffd86f;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            font-size: 14px;
            opacity: 0.7;
        }

        /* زر تغيير الثيم */
        #themeToggle {
            display: block;
            margin: 0 auto;
            padding: 8px 15px;
            background: #ff7e5f;
            color: #fff;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.4s ease;
        }

        #themeToggle:hover {
            background: #e5674f;
        }

        body.night #themeToggle {
            background: #34495E;
        }

        body.night #themeToggle:hover {
            background: #2C3E50;
        }
    </style>
</head>
<body class="day">

    <h1><i class="fas fa-mosque"></i> مواقيت الصلاة</h1>
    <h2>الموصل - العراق</h2>
    <div id="date"></div>

    <button id="themeToggle"><i class="fas fa-moon"></i> الوضع الليلي</button>

    <div class="container" id="prayerTimes">
        <div>جارِ التحميل...</div>
    </div>

    <footer>تم إنشاء الصفحة باستخدام (محمد رعد) </footer>

    <script>
        const prayerIcons = {
            "الفجر": "fa-cloud-moon",
            "الشروق": "fa-sun",
            "الظهر": "fa-cloud-sun",
            "العصر": "fa-sun-haze",
            "المغرب": "fa-sunset",
            "العشاء": "fa-moon"
        };

        function formatTimeTo12Hour(time24) {
            let [hour, minute] = time24.split(':').map(Number);
            let period = hour >= 12 ? "مساءً" : "صباحًا";
            hour = hour % 12 || 12;
            return `${hour}:${minute.toString().padStart(2, '0')} ${period}`;
        }

        async function getPrayerTimes() {
            try {
                const response = await fetch("https://api.aladhan.com/v1/timingsByCity?city=Mosul&country=Iraq&method=5");
                const data = await response.json();

                const timings = data.data.timings;
                const dateInfo = `${data.data.date.hijri.day} ${data.data.date.hijri.month.ar} ${data.data.date.hijri.year} هـ | ${data.data.date.readable}`;
                document.getElementById("date").innerText = dateInfo;

                const prayers = [
                    { name: "الفجر", time: timings.Fajr },
                    { name: "الشروق", time: timings.Sunrise },
                    { name: "الظهر", time: timings.Dhuhr },
                    { name: "العصر", time: timings.Asr },
                    { name: "المغرب", time: timings.Maghrib },
                    { name: "العشاء", time: timings.Isha }
                ];

                const container = document.getElementById("prayerTimes");
                container.innerHTML = "";
                prayers.forEach((prayer, index) => {
                    setTimeout(() => {
                        const card = document.createElement("div");
                        card.classList.add("card", "show");
                        card.innerHTML = `
                            <div class="icon"><i class="fas ${prayerIcons[prayer.name]}"></i></div>
                            <div class="prayer-name">${prayer.name}</div>
                            <div class="prayer-time">${formatTimeTo12Hour(prayer.time)}</div>
                        `;
                        container.appendChild(card);
                    }, index * 150);
                });
            } catch (error) {
                document.getElementById("prayerTimes").innerHTML = "<div>حدث خطأ أثناء جلب البيانات</div>";
            }
        }

        // تحديث المواقيت أول مرة
        getPrayerTimes();

        // تحديث تلقائي عند منتصف الليل
        function scheduleNextUpdate() {
            const now = new Date();
            const nextDay = new Date();
            nextDay.setHours(24, 0, 5, 0);
            const timeUntilNextDay = nextDay - now;

            setTimeout(() => {
                getPrayerTimes();
                scheduleNextUpdate();
            }, timeUntilNextDay);
        }
        scheduleNextUpdate();

        // تبديل الثيم
        document.getElementById("themeToggle").addEventListener("click", () => {
            const body = document.body;
            body.classList.toggle("night");
            body.classList.toggle("day");

            const icon = document.querySelector("#themeToggle i");
            if (body.classList.contains("night")) {
                icon.classList.replace("fa-moon", "fa-sun");
                document.getElementById("themeToggle").innerHTML = `<i class="fas fa-sun"></i> الوضع النهاري`;
            } else {
                icon.classList.replace("fa-sun", "fa-moon");
                document.getElementById("themeToggle").innerHTML = `<i class="fas fa-moon"></i> الوضع الليلي`;
            }
        });
    </script>

</body>

</html>
